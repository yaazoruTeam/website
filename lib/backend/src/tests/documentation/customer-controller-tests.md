# תיעוד טסטים לקונטרולר לקוחות

קובץ זה מכיל טסטים מקיפים לכל הפונקציות שבקונטרולר לקוחות (Customer). הטסטים בודקים את התנהגות הקונטרולר בתרחישים שונים כולל מקרי קצה ושגיאות. כל טסט מוקק את השכבת מסד הנתונים ואת פונקציות הוולידציה כדי לבדוק את הלוגיקה העסקית בלבד. הטסטים כוללים בדיקות עבור יצירה, קריאה, עדכון ומחיקה של לקוחות, וכן פונקציות חיפוש מתקדמות לפי עיר, סטטוס ותאריכים.

## פונקציות הטסט

### `createCustomer`
- **טסט יצירת לקוח חדש והחזרת סטטוס 201**: בודק יצירת לקוח חדש עם כל הפרטים הנדרשים ובדיקת סטטוס התגובה.
- **טסט קריאה ל-next עם שגיאה אם יצירת לקוח נכשלת**: בודק טיפול בשגיאות במהלך יצירת לקוח במסד הנתונים.

### `getCustomers`
- **טסט החזרת רשימת לקוחות עם סטטוס 200**: בודק קבלת רשימת לקוחות עם מידע על עימוד וסיכום כללי.
- **טסט קריאה ל-next עם שגיאה אם קבלת לקוחות נכשלת**: בודק טיפול בשגיאות במסד הנתונים בעת קבלת רשימת הלקוחות.

### `getCustomerById`
- **טסט החזרת לקוח לפי מזהה עם סטטוס 200**: בודק החזרת פרטי לקוח ספציפי לפי מזהה לאחר וולידציה וקיום.
- **טסט החזרת 404 אם לקוח לא קיים**: בודק החזרת קוד שגיאה 404 כאשר הלקוח עם המזהה הנתון לא קיים.
- **טסט קריאה ל-next עם שגיאה אם קבלת לקוח נכשלת**: בודק טיפול בשגיאות במהלך קבלת פרטי הלקוח מהמסד.

### `getCustomersByCity`
- **טסט החזרת לקוחות לפי עיר עם סטטוס 200**: בודק החזרת לקוחות מעיר ספציפית עם מידע עימוד מלא.
- **טסט החזרת 404 אם לא נמצאו לקוחות בעיר**: בודק החזרת שגיאה 404 כאשר לא נמצאו לקוחות בעיר המבוקשת.
- **טסט קריאה ל-next עם שגיאה אם קבלת לקוחות לפי עיר נכשלת**: בודק טיפול בשגיאות במסד הנתונים בחיפוש לפי עיר.

### `getCustomersByStatus`
- **טסט החזרת לקוחות לפי סטטוס עם סטטוס 200**: בודק החזרת לקוחות לפי סטטוס (פעיל/לא פעיל) עם עימוד.
- **טסט החזרת 400 לסטטוס לא תקין**: בודק החזרת שגיאה 400 כאשר הסטטוס המבוקש אינו חוקי.
- **טסט קריאה ל-next עם שגיאה אם קבלת לקוחות לפי סטטוס נכשלת**: בודק טיפול בשגיאות במסד הנתונים בחיפוש לפי סטטוס.

### `getCustomersByDateRange`
- **טסט החזרת לקוחות לפי טווח תאריכים עם סטטוס 200**: בודק החזרת לקוחות שנוצרו בטווח תאריכים מסוים.
- **טסט החזרת 400 אם תאריך התחלה או סיום חסר**: בודק החזרת שגיאה 400 כאשר חסרים פרמטרי תאריכים נדרשים.
- **טסט החזרת 404 אם לא נמצאו לקוחות בטווח תאריכים**: בודק החזרת שגיאה 404 כאשר לא נמצאו לקוחות בטווח התאריכים המבוקש.
- **טסט קריאה ל-next עם שגיאה אם קבלת לקוחות לפי טווח תאריכים נכשלת**: בודק טיפול בשגיאות במסד הנתונים בחיפוש לפי תאריכים.

### `updateCustomer`
- **טסט עדכון לקוח והחזרת סטטוס 200**: בודק עדכון פרטי לקוח קיים לאחר ולידציה מלאה של מזהה ונתונים.
- **טסט קריאה ל-next עם שגיאה אם עדכון לקוח נכשל**: בודק טיפול בשגיאות כלליות במהלך עדכון הלקוח במסד הנתונים.

### `deleteCustomer`
- **טסט מחיקת לקוח והחזרת סטטוס 200**: בודק מחיקת לקוח קיים לאחר וולידציה ובדיקת קיום.
- **טסט החזרת 404 אם לקוח לא קיים**: בודק החזרת שגיאה 404 כאשר הלקוח למחיקה לא קיים.
- **טסט קריאה ל-next עם שגיאה אם מחיקת לקוח נכשלת**: בודק טיפול בשגיאות במהלך מחיקת הלקוח מהמסד.

### `existingCustomer`
- **טסט שקריאה ל-sanitizeExistingCustomer אם לקוח קיים**: בודק שהפונקציה קוראת לוולידציה כאשר נמצא לקוח עם פרטים זהים.
- **טסט שלא קוראת ל-sanitizeExistingCustomer אם לקוח לא קיים**: בודק שהפונקציה לא קוראת לוולידציה כאשר לא נמצא לקוח זהה.
- **טסט זריקת שגיאה אם לקוח עם אותו מספר זהות קיים**: בודק זריקת שגיאה כאשר נמצא לקוח עם אותו מספר זהות אבל פרטים שונים.

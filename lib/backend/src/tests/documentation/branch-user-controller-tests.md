# תיעוד טסטים לקונטרולר סניף-משתמש

קובץ זה מכיל טסטים מקיפים לכל הפונקציות שבקונטרולר סניף-משתמש (BranchUser). הטסטים בודקים את התנהגות הקונטרולר בתרחישים שונים כולל מקרי קצה ושגיאות. כל טסט מוקק את השכבת מסד הנתונים ואת פונקציות הוולידציה כדי לבדוק את הלוגיקה העסקית בלבד. הטסטים כוללים בדיקות עבור יצירה, קריאה, עדכון ומחיקה של קשרים בין סניפים ומשתמשים, כולל וולידציה של קיום הסניף והמשתמש בטרם יצירת הקשר.

## פונקציות הטסט

### `createBranchUser`
- **טסט יצירת קשר סניף-משתמש בהצלחה**: בודק יצירת קשר חדש בין סניף ומשתמש לאחר וולידציה של קיום שניהם.
- **טסט החזרת 404 אם סניף לא קיים**: בודק החזרת שגיאה 404 כאשר הסניף המבוקש לא קיים במערכת.
- **טסט החזרת 404 אם משתמש לא קיים**: בודק החזרת שגיאה 404 כאשר המשתמש המבוקש לא קיים במערכת.
- **טסט החזרת 409 אם צירוף קיים**: בודק החזרת שגיאה 409 כאשר הקשר בין הסניף והמשתמש כבר קיים.
- **טסט שגיאות במהלך יצירת קשר**: בודק טיפול בשגיאות כלליות במהלך יצירת הקשר במסד הנתונים.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של נתוני הקלט.
- **טסט שגיאות בבדיקת קיום סניף**: בודק טיפול בשגיאות במהלך בדיקת קיום הסניף.
- **טסט שגיאות בבדיקת קיום משתמש**: בודק טיפול בשגיאות במהלך בדיקת קיום המשתמש.
- **טסט שגיאות בבדיקת קיום צירוף**: בודק טיפול בשגיאות במהלך בדיקת קיום הצירוף הקיים.

### `getAllBranchUser`
- **טסט קבלת כל קשרי סניף-משתמש עם עימוד**: בודק החזרת רשימת כל הקשרים עם מידע על עימוד ומספר דפים.
- **טסט ברירת מחדל לעמוד ראשון**: בודק התנהגות כאשר לא מועבר פרמטר עמוד (ברירת מחדל לעמוד 1).
- **טסט שגיאות במהלך קבלת קשרים**: בודק טיפול בשגיאות במסד הנתונים בעת קבלת רשימת הקשרים.
- **טסט פרמטר עמוד לא תקין**: בודק טיפול בפרמטר עמוד לא תקין והחזרה לברירת מחדל.

### `getBranchUserById`
- **טסט קבלת קשר סניף-משתמש לפי מזהה**: בודק החזרת פרטי קשר ספציפי לפי מזהה לאחר וולידציה וקיום.
- **טסט החזרת 404 אם קשר לא נמצא**: בודק החזרת קוד שגיאה 404 כאשר הקשר עם המזהה הנתון לא קיים.
- **טסט שגיאות בבדיקת קיום קשר**: בודק טיפול בשגיאות במהלך בדיקת קיום הקשר במסד הנתונים.
- **טסט שגיאות ולידציה של מזהה**: בודק טיפול בשגיאות ולידציה של פורמט המזהה.
- **טסט שגיאות בקבלת קשר לפי מזהה**: בודק טיפול בשגיאות במהלך קבלת פרטי הקשר מהמסד.

### `getBranchUserByBranch_id`
- **טסט קבלת קשרי משתמשים לפי מזהה סניף**: בודק החזרת כל המשתמשים המקושרים לסניף ספציפי עם עימוד.
- **טסט החזרת 404 אם סניף לא קיים**: בודק החזרת שגיאה 404 כאשר הסניף המבוקש לא קיים במערכת.
- **טסט ברירת מחדל לעמוד**: בודק התנהגות כאשר לא מועבר פרמטר עמוד בחיפוש לפי סניף.
- **טסט שגיאות בבדיקת קיום סניף**: בודק טיפול בשגיאות במהלך בדיקת קיום הסניף לחיפוש.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של מזהה הסניף.
- **טסט שגיאות בקבלת קשרים לפי סניף**: בודק טיפול בשגיאות במהלך קבלת הקשרים מהמסד.

### `getBranchUserByUser_id`
- **טסט קבלת קשרי סניפים לפי מזהה משתמש**: בודק החזרת כל הסניפים המקושרים למשתמש ספציפי עם עימוד.
- **טסט החזרת 404 אם משתמש לא קיים**: בודק החזרת שגיאה 404 כאשר המשתמש המבוקש לא קיים במערכת.
- **טסט ברירת מחדל לעמוד**: בודק התנהגות כאשר לא מועבר פרמטר עמוד בחיפוש לפי משתמש.
- **טסט שגיאות בבדיקת קיום משתמש**: בודק טיפול בשגיאות במהלך בדיקת קיום המשתמש לחיפוש.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של מזהה המשתמש.
- **טסט שגיאות בקבלת קשרים לפי משתמש**: בודק טיפול בשגיאות במהלך קבלת הקשרים מהמסד.

### `updateBranchUser`
- **טסט עדכון קשר סניף-משתמש בהצלחה**: בודק עדכון פרטי קשר קיים לאחר ולידציה של מזהה ונתונים וקיום הסניף והמשתמש.
- **טסט החזרת 404 אם סניף לא קיים בעדכון**: בודק החזרת שגיאה 404 כאשר הסניף לעדכון לא קיים.
- **טסט החזרת 404 אם משתמש לא קיים בעדכון**: בודק החזרת שגיאה 404 כאשר המשתמש לעדכון לא קיים.
- **טסט שגיאות במהלך עדכון קשר**: בודק טיפול בשגיאות כלליות במהלך עדכון הקשר במסד הנתונים.
- **טסט שגיאות ולידציה של מזהה**: בודק טיפול בשגיאות ולידציה של פורמט המזהה לעדכון.
- **טסט שגיאות ולידציה של נתונים**: בודק טיפול בשגיאות ולידציה של נתוני הגוף לעדכון.
- **טסט קשר לא נמצא בעדכון**: בודק טיפול במקרה שהקשר לעדכון לא קיים במערכת.
- **טסט שגיאות בבדיקת קיום סניף בעדכון**: בודק טיפול בשגיאות במהלך בדיקת קיום הסניף בעדכון.
- **טסט שגיאות בבדיקת קיום משתמש בעדכון**: בודק טיפול בשגיאות במהלך בדיקת קיום המשתמש בעדכון.

### `deleteBranchUser`
- **טסט מחיקת קשר סניף-משתמש בהצלחה**: בודק מחיקת קשר קיים לאחר וולידציה ובדיקת קיום.
- **טסט החזרת 404 אם קשר לא קיים למחיקה**: בודק החזרת שגיאה 404 כאשר הקשר למחיקה לא קיים.
- **טסט שגיאות בבדיקת קיום קשר למחיקה**: בודק טיפול בשגיאות במהלך בדיקת קיום הקשר למחיקה.
- **טסט שגיאות במחיקת קשר**: בודק טיפול בשגיאות במהלך ביצוע המחיקה במסד הנתונים.
- **טסט שגיאות ולידציה למחיקה**: בודק טיפול בשגיאות ולידציה של המזהה למחיקה.
- **טסט קשר לא נמצא במהלך מחיקה**: בודק טיפול במקרה שהקשר נמחק או לא נמצא במהלך תהליך המחיקה.

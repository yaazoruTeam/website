# תיעוד טסטים לקונטרולר האימות

קובץ זה מכיל טסטים מקיפים לכל הפונקציות שבקונטרולר האימות (AuthController). הטסטים בודקים את התנהגות הקונטרולר בתרחישים שונים כולל מקרי קצה ושגיאות. כל טסט מוקק את השכבת מסד הנתונים ואת פונקציות הסיסמה והטוקנים כדי לבדוק את הלוגיקה העסקית בלבד. הטסטים כוללים בדיקות עבור רישום משתמשים, התחברות ורענון טוקנים, כולל בדיקות אינטגרציה מקיפות.

## פונקציות הטסט

### `register`
- **טסט רישום משתמש חדש בהצלחה**: בודק רישום משתמש חדש באמצעות קריאה לפונקציית createUser.
- **טסט שגיאות במהלך רישום**: בודק טיפול בשגיאות כלליות שנזרקות מפונקציית createUser.
- **טסט שגיאות ולידציה מ-createUser**: בודק טיפול בשגיאות ולידציה שמוחזרות מפונקציית יצירת המשתמש.
- **טסט שגיאות מסד נתונים ברישום**: בודק טיפול בשגיאות מסד נתונים כמו משתמש קיים.

### `register - Integration Tests`
- **טסט דחיית רישום עם שדות חסרים**: בודק דחיית רישום כאשר חסרים שדות נדרשים כמו אימייל ושם פרטי.
- **טסט רישום מוצלח עם נתונים מלאים**: בודק רישום מוצלח עם כל הנתונים הנדרשים לרבות טלפון וכתובת.
- **טסט דחיית רישום עם פורמטים לא תקינים**: בודק דחיית רישום עם נתונים בפורמט לא תקין כמו אימייל לא חוקי.
- **טסט דחיית רישום למשתמש קיים**: בודק דחיית רישום כאשר משתמש עם אותם פרטים כבר קיים במערכת.
- **טסט שגיאות הצפנת סיסמה ברישום**: בודק טיפול בשגיאות שמתרחשות במהלך הצפנת הסיסמה.

### `login`
- **טסט התחברות מוצלחת עם פרטים תקינים**: בודק התחברות מוצלחת עם שם משתמש וסיסמה נכונים וייצור טוקן.
- **טסט החזרת 404 אם משתמש לא נמצא**: בודק החזרת שגיאה 404 כאשר שם המשתמש לא קיים במערכת.
- **טסט החזרת 401 אם סיסמה שגויה**: בודק החזרת שגיאה 401 כאשר הסיסמה לא נכונה.
- **טסט שגיאות מסד נתונים בחיפוש משתמש**: בודק טיפול בשגיאות מסד נתונים במהלך חיפוש המשתמש.
- **טסט שגיאות השוואת סיסמאות**: בודק טיפול בשגיאות שמתרחשות במהלך השוואת הסיסמאות.
- **טסט שגיאות ייצור טוקן**: בודק טיפול בשגיאות שמתרחשות במהלך ייצור הטוקן.
- **טסט פרטי התחברות חסרים**: בודק התנהגות כאשר לא נשלחים פרטי התחברות.

### `login - Integration Tests`
- **טסט דחיית התחברות עם פרטי התחברות חסרים לגמרי**: בודק דחיית התחברות כאשר הבקשה ריקה לחלוטין.
- **טסט דחיית התחברות עם שם משתמש ריק**: בודק דחיית התחברות כאשר שם המשתמש ריק.
- **טסט דחיית התחברות עם סיסמה ריקה**: בודק דחיית התחברות כאשר הסיסמה ריקה.
- **טסט דחיית התחברות עם סיסמה רווחים בלבד**: בודק דחיית התחברות כאשר הסיסמה מכילה רק רווחים.
- **טסט התחברות עם פרטים לא תקינים מבחינת סוג**: בודק התנהגות עם פרטי התחברות שאינם מחרוזות.
- **טסט התחברות מוצלחת עם נתוני משתמש ריאליים**: בודק התחברות מוצלחת עם נתונים מלאים וריאליים.

### `refreshToken`
- **טסט רענון טוקן מוצלח עם טוקן תקין**: בודק רענון טוקן מוצלח עם טוקן JWT תקין בכותרת Authorization.
- **טסט החזרת 403 אם כותרת Authorization חסרה**: בודק החזרת שגיאה 403 כאשר כותרת Authorization לא קיימת.
- **טסט החזרת 403 אם טוקן חסר מכותרת Authorization**: בודק החזרת שגיאה 403 כאשר הכותרת קיימת אבל הטוקן חסר.
- **טסט החזרת 403 אם פורמט כותרת Authorization לא תקין**: בודק החזרת שגיאה 403 עם פורמט כותרת שגוי.
- **טסט החזרת 401 אם טוקן לא תקין**: בודק החזרת שגיאה 401 כאשר הטוקן לא תקין או פגום.
- **טסט החזרת 401 אם אימות טוקן לא מחזיר נתונים מפוענחים**: בודק טיפול במקרה שהאימות מצליח אבל אין נתונים מפוענחים.
- **טסט שגיאות אימות טוקן**: בודק טיפול בשגיאות שמתרחשות במהלך תהליך אימות הטוקן.
- **טסט שגיאות ייצור טוקן חדש ברענון**: בודק טיפול בשגיאות שמתרחשות במהלך ייצור טוקן חדש.
- **טסט כותרת Authorization מעוותת**: בודק טיפול בכותרת Authorization עם פורמט לא צפוי.
- **טסט ערך כותרת Authorization undefined**: בודק טיפול בכותרת Authorization עם ערך undefined.

# תיעוד טסטים לקונטרולר מכשירי לקוח

קובץ זה מכיל טסטים מקיפים לכל הפונקציות שבקונטרולר מכשירי לקוח (CustomerDevice). הטסטים בודקים את התנהגות הקונטרולר בתרחישים שונים כולל מקרי קצה ושגיאות. כל טסט מוקק את השכבת מסד הנתונים ואת פונקציות הוולידציה כדי לבדוק את הלוגיקה העסקית בלבד. הטסטים כוללים בדיקות עבור יצירה, קריאה, עדכון ומחיקה של קשרים בין לקוחות ומכשירים, כולל וולידציה של קיום הלקוח והמכשיר וטיפול בקשרים קיימים.

## פונקציות הטסט

### `createCustomerDevice`
- **טסט יצירת מכשיר לקוח חדש בהצלחה**: בודק יצירת קשר חדש בין לקוח ומכשיר עם כל הפרטים הנדרשים כמו תאריך קבלה ותוכנית מכשיר.
- **טסט שגיאת לקוח לא נמצא**: בודק טיפול בשגיאה 404 כאשר הלקוח המצויין לא קיים במערכת.
- **טסט שגיאת מכשיר לא נמצא**: בודק טיפול בשגיאה 404 כאשר המכשיר המצויין לא קיים במערכת.
- **טסט שגיאת ולידציה למכשיר קיים**: בודק טיפול בשגיאה כאשר מנסים לשייך מכשיר שכבר משויך ללקוח אחר.
- **טסט שגיאות ולידציה של גוף הבקשה**: בודק טיפול בשגיאות ולידציה של נתוני הקלט.
- **טסט שגיאות מסד נתונים במהלך יצירה**: בודק טיפול בשגיאות במסד הנתונים במהלך יצירת הקשר.

### `getCustomersDevices`
- **טסט קבלת כל מכשירי הלקוחות עם עימוד**: בודק החזרת רשימת כל הקשרים בין לקוחות ומכשירים עם מידע עימוד.
- **טסט ברירת מחדל לעמוד ראשון**: בודק התנהגות כאשר לא מועבר פרמטר עמוד (ברירת מחדל לעמוד 1).
- **טסט פרמטר עמוד לא תקין**: בודק טיפול בפרמטר עמוד לא תקין והחזרה לברירת מחדל.
- **טסט שגיאות במהלך קבלת מכשירי לקוחות**: בודק טיפול בשגיאות במסד הנתונים בעת קבלת רשימת הקשרים.

### `getCustomerDeviceById`
- **טסט קבלת מכשיר לקוח לפי מזהה**: בודק החזרת פרטי קשר ספציפי לפי מזהה לאחר וולידציה וקיום.
- **טסט החזרת 404 אם מכשיר לקוח לא נמצא**: בודק החזרת קוד שגיאה 404 כאשר הקשר עם המזהה הנתון לא קיים.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של פורמט המזהה.
- **טסט שגיאות בבדיקת קיום מכשיר לקוח**: בודק טיפול בשגיאות במהלך בדיקת קיום הקשר במסד הנתונים.
- **טסט שגיאות בקבלת מכשיר לקוח לפי מזהה**: בודק טיפול בשגיאות במהלך קבלת פרטי הקשר מהמסד.

### `getAllDevicesByCustomerId`
- **טסט קבלת כל המכשירים ללקוח**: בודק החזרת כל המכשירים המשויכים ללקוח ספציפי עם עימוד.
- **טסט החזרת 404 אם לקוח לא נמצא**: בודק החזרת שגיאה 404 כאשר הלקוח המבוקש לא קיים במערכת.
- **טסט החזרת 404 אם ללקוח אין מכשירים**: בודק החזרת שגיאה 404 כאשר הלקוח קיים אבל אין לו מכשירים משויכים.
- **טסט ברירת מחדל לעמוד**: בודק התנהגות כאשר לא מועבר פרמטר עמוד בחיפוש לפי לקוח.
- **טסט שגיאות בבדיקת קיום לקוח**: בודק טיפול בשגיאות במהלך בדיקת קיום הלקוח לחיפוש.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של מזהה הלקוח.

### `getCustomerIdByDeviceId`
- **טסט קבלת מכשירי לקוח לפי מזהה מכשיר**: בודק החזרת כל הלקוחות המשויכים למכשיר ספציפי עם עימוד.
- **טסט החזרת 404 אם מכשיר לא נמצא**: בודק החזרת שגיאה 404 כאשר המכשיר המבוקש לא קיים במערכת.
- **טסט ברירת מחדל לעמוד**: בודק התנהגות כאשר לא מועבר פרמטר עמוד בחיפוש לפי מכשיר.
- **טסט שגיאות בבדיקת קיום מכשיר**: בודק טיפול בשגיאות במהלך בדיקת קיום המכשיר לחיפוש.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של מזהה המכשיר.
- **טסט שגיאות בקבלת מכשירי לקוח לפי מזהה מכשיר**: בודק טיפול בשגיאות במהלך קבלת הקשרים מהמסד.

### `updateCustomerDevice`
- **טסט עדכון מכשיר לקוח בהצלחה**: בודק עדכון פרטי קשר קיים לאחר ולידציה של מזהה ונתונים וקיום הלקוח והמכשיר.
- **טסט לקוח לא נמצא במהלך עדכון**: בודק טיפול בשגיאה כאשר הלקוח לעדכון לא קיים.
- **טסט מכשיר לא נמצא במהלך עדכון**: בודק טיפול בשגיאה כאשר המכשיר לעדכון לא קיים.
- **טסט שגיאות ולידציה של מזהה**: בודק טיפול בשגיאות ולידציה של פורמט המזהה לעדכון.
- **טסט שגיאות ולידציה של נתונים**: בודק טיפול בשגיאות ולידציה של נתוני הגוף לעדכון.
- **טסט שגיאת ולידציה למכשיר קיים במהלך עדכון**: בודק טיפול בשגיאה כאשר מנסים לעדכן למכשיר שכבר משויך.
- **טסט שגיאות במהלך עדכון מכשיר לקוח**: בודק טיפול בשגיאות במהלך עדכון הקשר במסד הנתונים.

### `deleteCustomerDevice`
- **טסט מחיקת מכשיר לקוח בהצלחה**: בודק מחיקת קשר קיים לאחר וולידציה ובדיקת קיום.
- **טסט החזרת 404 אם מכשיר לקוח לא קיים**: בודק החזרת שגיאה 404 כאשר הקשר למחיקה לא קיים.
- **טסט שגיאות בבדיקת קיום מכשיר לקוח**: בודק טיפול בשגיאות במהלך בדיקת קיום הקשר למחיקה.
- **טסט שגיאות במחיקת מכשיר לקוח**: בודק טיפול בשגיאות במהלך ביצוע המחיקה במסד הנתונים.
- **טסט שגיאות ולידציה למחיקה**: בודק טיפול בשגיאות ולידציה של המזהה למחיקה.

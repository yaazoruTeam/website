# תיעוד טסטים לקונטרולר פרטי אשראי

קובץ זה מכיל טסטים מקיפים לכל הפונקציות שבקונטרולר פרטי אשראי (CreditDetails). הטסטים בודקים את התנהגות הקונטרולר בתרחישים שונים כולל מקרי קצה ושגיאות. כל טסט מוקק את השכבת מסד הנתונים ואת פונקציות הוולידציה כדי לבדוק את הלוגיקה העסקית בלבד. הטסטים כוללים בדיקות עבור יצירה, קריאה ועדכון של פרטי אשראי, כולל וולידציה של קיום לקוח ובדיקת ייחודיות טוקן אשראי.

## פונקציות הטסט

### `createCreditDetails`
- **טסט יצירת פרטי אשראי חדשים בהצלחה**: בודק יצירת פרטי אשראי חדשים עם טוקן ייחודי ולקוח קיים.
- **טסט החזרת 404 אם לקוח לא קיים**: בודק החזרת שגיאה 404 כאשר הלקוח המצויין לא קיים במערכת.
- **טסט החזרת 490 אם טוקן כבר קיים**: בודק החזרת שגיאה 490 כאשר הטוקן שמנסים להוסיף כבר קיים במערכת.
- **טסט שגיאות במהלך יצירת פרטי אשראי**: בודק טיפול בשגיאות כלליות במהלך יצירת פרטי האשראי במסד הנתונים.
- **טסט שגיאות ולידציה**: בודק טיפול בשגיאות ולידציה של נתוני הקלט.
- **טסט שגיאות בבדיקת קיום לקוח**: בודק טיפול בשגיאות במהלך בדיקת קיום הלקוח.
- **טסט שגיאות בבדיקת קיום טוקן**: בודק טיפול בשגיאות במהלך בדיקת קיום הטוקן.
- **טסט לוגים של נתונים מסוננים ותוצאת בדיקת טוקן**: בודק שהנתונים המסוננים ותוצאת בדיקת הטוקן נרשמים בלוגים.

### `getCreditDetails`
- **טסט קבלת כל פרטי אשראי עם עימוד**: בודק החזרת רשימת פרטי אשראי עם מידע על עימוד ומספר דפים.
- **טסט ברירת מחדל לעמוד ראשון**: בודק התנהגות כאשר לא מועבר פרמטר עמוד (ברירת מחדל לעמוד 1).
- **טסט שגיאות במהלך קבלת פרטי אשראי**: בודק טיפול בשגיאות במסד הנתונים בעת קבלת רשימת פרטי האשראי.
- **טסט פרמטר עמוד לא תקין**: בודק טיפול בפרמטר עמוד לא תקין והחזרה לברירת מחדל.
- **טסט חישוב עימוד נכון למספר עמודים**: בודק חישוב נכון של offset לעמודים מרובים ותצוגת תוצאות.

### `getCreditDetailsById`
- **טסט קבלת פרטי אשראי לפי מזהה**: בודק החזרת פרטי אשראי ספציפיים לפי מזהה לאחר וולידציה וקיום.
- **טסט החזרת 404 אם פרטי אשראי לא נמצאו**: בודק החזרת קוד שגיאה 404 כאשר פרטי האשראי עם המזהה הנתון לא קיימים.
- **טסט שגיאות בבדיקת קיום פרטי אשראי**: בודק טיפול בשגיאות במהלך בדיקת קיום פרטי האשראי במסד הנתונים.
- **טסט שגיאות ולידציה של מזהה**: בודק טיפול בשגיאות ולידציה של פורמט המזהה.
- **טסט שגיאות בקבלת פרטי אשראי לפי מזהה**: בודק טיפול בשגיאות במהלך קבלת פרטי האשראי מהמסד.

### `updateCreditDetails`
- **טסט עדכון פרטי אשראי בהצלחה**: בודק עדכון פרטי אשראי קיימים לאחר ולידציה של מזהה ונתונים וקיום הלקוח.
- **טסט החזרת 404 אם לקוח לא קיים בעדכון**: בודק החזרת שגיאה 404 כאשר הלקוח לעדכון לא קיים.
- **טסט שגיאות במהלך עדכון פרטי אשראי**: בודק טיפול בשגיאות כלליות במהלך עדכון פרטי האשראי במסד הנתונים.
- **טסט שגיאות ולידציה של מזהה**: בודק טיפול בשגיאות ולידציה של פורמט המזהה לעדכון.
- **טסט שגיאות ולידציה של נתונים**: בודק טיפול בשגיאות ולידציה של נתוני הגוף לעדכון.
- **טסט פרטי אשראי לא נמצאו בעדכון**: בודק טיפול במקרה שפרטי האשראי לעדכון לא קיימים במערכת.
- **טסט שגיאות בבדיקת קיום לקוח בעדכון**: בודק טיפול בשגיאות במהלך בדיקת קיום הלקוח בעדכון.
- **טסט סינון נתונים וקריאה לפונקציית sanitize עם פרמטרים נכונים**: בודק שסינון הנתונים מתבצע נכון עם הפרמטרים המתאימים.
